@import "fonts.scss";
@import "common.scss";

html,
body {
  border: 0;
  margin: 0 auto;
  padding: 0;

  font-size: calc(#{$size} * 3.6);
  font-size: clamp(14px, 1vw, 18px); // Smaller base size, limits scaling
  line-height: $standard-line-height;

  @media print {
    font-size: calc(#{$size} * 2.8);
    max-width: 190mm;
    line-height: $standard-line-height;
  }

  a {
    &:not(.no-decoration) {
      // @include no-smart-underline();
      text-decoration: underline;
    }
  }

  // Vertical layout for experiences with hierarchical bullets
  #experiences {
    ul.experiences {
      width: 100%;
      list-style-type: disc; // Parent bullets for experience titles
      padding-left: 1.5rem;
      margin: 0;
    }
    
    li.experience {
      // Simple vertical layout with parent bullets
      display: list-item; // Show parent bullets
      width: 100%;
      break-inside: auto; // Modern property - no need for page-break-inside
      margin-bottom: 1.2em;
      
      // Child bullets (experience details) - different style
      > ul {
        list-style-type: circle; // Different bullet style for details
        margin-top: 0.5rem;
        padding-left: 1.5rem;
        
        li {
          display: list-item;
        }
      }
    }
  }

  // Simple float-based layout
  .intro {
    overflow: hidden; // Clearfix
    margin-bottom: 1em;
  }

  .left-column {
    float: left;
    width: 48%;
    text-align: left;
  }

  .right-column {
    float: right;
    width: 48%;
    text-align: right;
  }

  // General list styling
  ul {
    width: 100%;
    padding: 0;
    margin: 0;
    list-style-type: none;
    
    .experience {
      // Full-width vertical layout
      display: block;
      width: 100%;
      break-inside: auto; // Modern property covers page-break-inside
      margin-bottom: 0.8em;
      padding: 0;
      box-sizing: border-box;
      
      h3, h4, h5 {
        margin-bottom: 0.1em;
        margin-top: 0;
      }
      
      ul {
        margin-top: 0;
        margin-bottom: 0.1em;
        padding-top: 0;
        padding-bottom: 0;
        padding-left: 1.5em;
        list-style-type: disc;
        
        // Ensure list items display with bullets
        li {
          break-inside: auto;
          display: list-item;
        }
      }
      
      li, p {
        margin-bottom: 0;
        margin-top: 0;
        line-height: 1.3;
      }
    }
  }
}

// Ensure print-specific styles are applied - bare minimum needed
@media print {
  html,
  body {
    padding: 0.2cm !important;
    margin: 0 !important;
    max-width: 100% !important;
    
    #experiences ul.experiences {
      width: 100% !important;
      list-style-type: disc !important;
      padding-left: 1.5rem !important;
      
      li.experience {
        // Single-column vertical layout for print
        width: 100% !important;
        display: list-item !important;
        list-style-type: disc !important;
        
        // Allow page breaks inside experience items
        break-inside: auto !important;
        margin-bottom: 1em !important; // Increased from 0.3em to match regular resume
        padding: 0 !important;
        
        h3, h4, h5 {
          margin-bottom: 0.15em !important; // Increased from 0.05em to match regular resume
          margin-top: 0 !important;
          line-height: 1.2 !important;
          break-after: avoid !important; /* Keep headings with their content */
        }
        
        // Ensure bullets are preserved in print mode
        > ul {
          margin-top: 0 !important;
          margin-bottom: 0.1em !important; // Increased from 0.05em
          padding-top: 0 !important;
          padding-bottom: 0 !important;
          list-style-type: circle !important;
          padding-left: 1.5rem !important;
          
          li {
            display: list-item !important;
            list-style-type: circle !important;
            break-inside: auto !important;
            line-height: 1.25 !important; // Match regular resume
            font-size: 12px !important; // Match regular resume
          }
        }
        
        li, p {
          margin-bottom: 0 !important;
          margin-top: 0 !important;
          line-height: 1.25 !important; // Increased from 1.2 to match regular resume
          font-size: 12px !important; // Match regular resume
        }
      }
    }

    /* Removed experience-grid-second-part styles for vertical layout */
  }

  /* Print-specific font sizes to match regular resume */
  html, body {
    font-size: 13px !important; // Slightly increased from 12px
    line-height: 1.3 !important; // Slightly increased from 1.2
  }

  h1 { font-size: 19px !important; line-height: 1.2 !important; }
  h2 { font-size: 17px !important; line-height: 1.2 !important; }
  h3 { font-size: 15px !important; line-height: 1.2 !important; }
  h4 { font-size: 14px !important; line-height: 1.2 !important; }
  
  ul, ol, p { 
    margin-top: 0.15em !important;
    margin-bottom: 0.15em !important;
    line-height: 1.25 !important;
  }

  /* Ensure paragraphs don't break in the middle */
  p {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  /* Prevent line breaks in the middle of sentences */
  .experience p, li p {
    orphans: 3;
    widows: 3;
  }

  /* Ensure proper spacing between elements */
  section {
    margin-bottom: 1em;
  }

  /* Improve text rendering in PDF */
  body {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    text-rendering: optimizeLegibility;
  }
  
  /* Removed Safari-specific fixes for column layouts */
}
