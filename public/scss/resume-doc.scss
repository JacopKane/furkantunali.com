@import "fonts.scss";
@import "common.scss";

html,
body {
  border: 0;
  margin: 0 auto;
  padding: 0;

  font-size: calc((#{$size}) * 1.44);
  line-height: $standard-line-height;

  a {
    &:not(.no-decoration) {
      // @include no-smart-underline();
      text-decoration: underline;
    }
  }

  // Simple float-based layout
  .intro {
    overflow: hidden; // Clearfix
    margin-bottom: 1em;
  }

  .left-column {
    float: left;
    width: 48%;
    text-align: left;
  }

  .right-column {
    float: right;
    width: 48%;
    text-align: right;
  }

  // Pure HTML positioning for experience columns
  .experience-columns {
    width: 100%;
    overflow: visible; // Changed from hidden to visible for better print behavior
    
    .experiences-left,
    .experiences-right {
      width: 48%;
      list-style-type: none;
      padding: 0;
      margin: 0;
      position: relative; // Add position for better print layout
      
      .experience {
        // Allow breaks for better flow
        break-inside: auto;
        page-break-inside: auto;
        margin-bottom: 0.5em;
        padding: 0;
        box-sizing: border-box;
        
        h3, h4, h5 {
          margin-bottom: 0.1em;
          margin-top: 0;
        }
        
        ul {
          margin-top: 0;
          margin-bottom: 0.1em;
          padding-top: 0;
          padding-bottom: 0;
          
          // Allow breaks inside list items
          li {
            break-inside: auto;
            page-break-inside: auto;
          }
        }
        
        li, p {
          margin-bottom: 0;
          margin-top: 0;
          line-height: 1.3;
        }
      }
    }
    
    // Use simple float for positioning
    .experiences-left {
      float: left;
      overflow: visible;
    }
    
    .experiences-right {
      float: right;
      overflow: visible;
    }
  }
}

// Ensure print-specific styles are applied - bare minimum needed
@media print {
  html,
  body {
    padding: 0.2cm !important;
    margin: 0 !important;
    max-width: 100% !important;
    
    .experience-columns {
      width: 100% !important;
      overflow: visible !important; // Changed from hidden to visible
      
      .experiences-left {
        float: left !important;
        width: 48% !important;
        position: relative !important;
        overflow: visible !important;
      }
      
      .experiences-right {
        float: right !important;
        width: 48% !important;
        position: relative !important;
        overflow: visible !important;
      }
      
      .experience {
        // Allow page breaks inside experience items
        break-inside: auto !important;
        page-break-inside: auto !important;
        margin-bottom: 0.3em !important;
        padding: 0 !important;
        
        h3, h4, h5 {
          margin-bottom: 0.05em !important;
          margin-top: 0 !important;
          line-height: 1.2 !important;
        }
        
        ul {
          margin-top: 0 !important;
          margin-bottom: 0.05em !important;
          padding-top: 0 !important;
          padding-bottom: 0 !important;
          
          // Allow page breaks inside list items
          li {
            break-inside: auto !important;
            page-break-inside: auto !important;
          }
        }
        
        li, p {
          margin-bottom: 0 !important;
          margin-top: 0 !important;
          line-height: 1.2 !important;
        }
      }
    }
  }

  /* Ensure paragraphs don't break in the middle */
  p {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  /* Prevent line breaks in the middle of sentences */
  .experience p, li p {
    orphans: 3;
    widows: 3;
  }

  /* Ensure proper spacing between elements */
  section {
    margin-bottom: 1em;
  }

  /* Improve text rendering in PDF */
  body {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    text-rendering: optimizeLegibility;
  }
}
